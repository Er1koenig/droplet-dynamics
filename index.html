<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Droplet Dynamics — Project Page</title>
  <meta name="description" content="Euler–Lagrange module for deformable sub-Kolmogorov droplets/bubbles coupled to an in-house Lattice–Boltzmann solver, with a rotation-error correction scheme and turbulence demos." />
  <meta name="author" content="TAO Yuhao" />

  <!-- Fonts & icons (match homepage) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:ital,wght@0,600;0,700;1,600;1,700&family=Noto+Serif+SC:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-RhCeKEeyiLdZ28yY7mVt8XzfnOz2bNqsTP7PvpB3qHwD6PPV6cO9HcL7JQhN4F5m2dlHtb1zGuUHmXn4b8vLAw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- MathJax for LaTeX -->
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  
  <style>
    /* ===== Theme tokens (aligned with your homepage) ===== */
    :root{
      --font-sans: "Inter", system-ui, -apple-system, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Noto Sans CJK SC", "Microsoft YaHei", Arial, sans-serif;
      --font-serif-head: "Lora", "Noto Serif SC", "Songti SC", STSong, Georgia, "Times New Roman", serif;

      --theme-color: #0b2f5b;
      --theme-color-light: #476d96;
      --theme-color-subtle: #e2e8f4;

      --bg: #ffffff;
      --text: #243447;
      --muted: #5b6b7b;
      --surface: #fafbfd;
      --border: rgba(11,47,91,.12);
      --shadow: 0 1px 3px rgba(0,0,0,.05), 0 8px 20px rgba(0,0,0,.06);

      --step--1: clamp(0.88rem, 0.18vw + 0.82rem, 0.96rem);
      --step-0:  clamp(1.00rem, 0.22vw + 0.94rem, 1.08rem);
      --step-1:  clamp(1.125rem, 0.32vw + 1.02rem, 1.25rem);
      --step-2:  clamp(1.35rem, 0.6vw + 1.12rem, 1.55rem);
      --step-3:  clamp(1.62rem, 0.9vw + 1.24rem, 1.95rem);
      --step-4:  clamp(2.15rem, 1.6vw + 1.42rem, 2.6rem);
      --step-5:  clamp(2.8rem,  2.8vw + 1.6rem, 3.6rem);
    }
    :root.dark{
      color-scheme: dark;
      --bg: #0f1216;
      --text: #e7ebf1;
      --muted: #aab4c1;
      --surface: #131821;
      --border: #293240;
      --theme-color-subtle: color-mix(in srgb, var(--theme-color) 28%, #141a22);
      --shadow: 0 2px 8px rgba(0,0,0,.45), 0 10px 28px rgba(0,0,0,.35);
    }

    html{scroll-behavior:smooth}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family:var(--font-sans); font-size:var(--step-0); line-height:1.7; letter-spacing:.01em;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    a{ color: var(--theme-color-light); text-decoration: underline transparent 2px; text-underline-offset:3px; transition: color .2s, text-decoration-color .2s; }
    a:hover{ color: var(--theme-color); text-decoration-color: var(--theme-color); }

    h1,h2,h3{ font-family:var(--font-serif-head); font-weight:600; line-height:1.22; letter-spacing:.006em; margin:0 0 .5rem; }
    h1{ font-size:var(--step-4); }
    h2{ font-size:var(--step-3); }

    .container{ max-width:900px; margin:0 auto; padding: 1.2rem 1.2rem 0; }

    /* Floating theme button (top-right) */
    .theme-btn{
      position: fixed; top: 14px; right: 16px; z-index: 1000;
      display:inline-flex; align-items:center; justify-content:center;
      width:36px; height:36px; border-radius:9999px;
      border:1px solid rgba(0,0,0,.12);
      background:rgba(255,255,255,.65);
      backdrop-filter: blur(8px) saturate(140%);
      -webkit-backdrop-filter: blur(8px) saturate(140%);
      cursor:pointer; font-size:1rem; line-height:1; color:#333;
      transition: background .2s, border-color .2s, transform .02s, opacity .2s; opacity:.95;
    }
    .theme-btn:hover{ opacity:1; border-color:rgba(0,0,0,.2) }
    .theme-btn:active{ transform: translateY(1px); }
    :root.dark .theme-btn{ background: rgba(20,24,31,.72); border-color: rgba(255,255,255,.12); color: var(--text); }

    /* Sections */
    section[id]{ scroll-margin-top: 24px; }
    .section{ padding: 1.6rem 0 2.2rem; }
    .section-title{ position:relative; font-size: var(--step-2); margin: 0 0 1rem; }
    .section-title::after{ content:""; position:absolute; left:0; bottom:-.45rem; width:3rem; height:3px; background:var(--theme-color); border-radius:1px; }

    .muted{ color: var(--muted); }

    /* Buttons */
    .btns{ display:flex; flex-wrap:wrap; gap:.6rem; margin:.8rem 0 0; }
    .btn{ display:inline-flex; align-items:center; gap:.5rem; padding:.52rem .9rem; border-radius: 9px; text-decoration:none; font-weight:600; letter-spacing:.02em; border:1px solid currentColor; transition: transform .02s, background .2s, color .2s, border-color .2s; }
    .btn:active{ transform: translateY(1px); }
    .btn-primary{ color:#fff; background: var(--theme-color); border-color: transparent; }

    /* Figures (card style with proper rounded corners) */
    .fig{ background: var(--surface); border:1px solid var(--border); border-radius: 12px; box-shadow: var(--shadow); padding: .8rem; margin: 1.2rem 0; }
    .fig .media{ border-radius:10px; overflow:hidden; }
    .fig .media img{ display:block; width:min(850px, 95vw); max-width:100%; height:auto; margin:0 auto; border-radius:0; border:none; }
    .cap{ font-size:.95rem; color:var(--muted); margin:.5rem auto 0; max-width:min(850px, 92vw); }

    .gallery{ display:grid; gap: 1rem; }

    /* Code / Math blocks */
    code{ background: color-mix(in srgb, var(--theme-color) 6%, #f5f7fb); padding: .1rem .35rem; border-radius: 4px; }
    :root.dark code{ background: color-mix(in srgb, var(--theme-color) 20%, #0f1216); }
    .math-block{ margin: 1rem 0; }
  </style>
</head>
<body>
  <!-- floating theme switcher -->
  <button id="theme-btn" class="theme-btn" type="button" aria-label="Theme: Light (click to change)" title="Theme: Light"><span id="theme-ico">☀︎</span></button>

  <main class="container">
    <!-- ===== Part I — Overview ===== -->
    <section id="overview" class="section">
      <h2 class="section-title">Part I — Project Overview</h2>
      <p>
        We augment an <em>in-house Lattice–Boltzmann solver</em> with an Euler–Lagrange module for
        <strong>deformable, sub-Kolmogorov droplets and bubbles</strong>. The particle kinematics follow the
        Maffettone–Minale (MM) ellipsoidal-drop model; a new correction term removes rotation-induced geometry error
        in pure vortex flow. The framework is validated in quiescent, shear and vortex tests, benchmarked on an
        oblate rising bubble, and applied to droplet-laden isotropic turbulence.
      </p>

      <!-- Single occurrence of the local PDF link -->
      <div class="btns">
        <a class="btn btn-primary" href="data/thesis.pdf" target="_blank" rel="noopener">
          <i class="fa-solid fa-file-pdf"></i> Full Thesis (PDF)
        </a>
      </div>
    </section>

    <!-- ===== Part II — Interaction Diagram ===== -->
    <section id="fig-network" class="section">
      <h2 class="section-title">Part II — Interaction Diagram</h2>
      <figure class="fig">
        <div class="media">
          <img src="image/correlation_network.png" alt="Correlation network of the multiphase system">
        </div>
        <figcaption class="cap">Coupling between the Lattice–Boltzmann flow solver and the Euler–Lagrange droplet module.</figcaption>
      </figure>
    </section>

    <!-- ===== Part III — Rotation-Error Correction ===== -->
    <section id="error-scheme" class="section">
      <h2 class="section-title">Part III — Correction Scheme for Rotation-Induced Geometrical Error</h2>

      <h3>1 · Probing the error ⇒ correction</h3>
      <div class="math-block">
        \[
          S' = S^{*}
            + \left.\frac{\partial S^{*}}{\partial t^{*}}\right|_{\text{vorticity}}\,
              \Delta t^{*}
            = V' D' V'^{T}
        \]
      </div>

      <div class="math-block">\[
        \frac{d S^{*}}{d t^{*}}
          = (\Omega^{*} S^{*} - S^{*} \Omega^{*})
          - \frac{f_{1}}{\mathrm{Ca}}\bigl[\,S^{*}-g(S^{*})I\,\bigr]
          + f_{2}\bigl(E^{*} S^{*} + S^{*} E^{*}\bigr)
          \;\color{teal}{-\;f_{3}\,V'(D'-D)V'^{T}}
          \qquad\text{(shape correction)}
      \]</div>

      <h3>2 · Turn-off near steady state</h3>
      <div class="math-block">
        \[
          f_{3} =
            \begin{cases}
              0, & \displaystyle\Bigl\lVert \frac{d S^{*}}{d t^{*}} \Bigr\rVert_{F} \le 0.01,\\[10pt]
              \tau_{\eta}^{\text{LB}}, & \text{otherwise.}
            \end{cases}
        \]
      </div>

      <h3>3 · Outcome</h3>
      <p class="muted">The scheme cancels the geometry error caused by droplet rotation; details are in the thesis.</p>
    </section>

    <!-- ===== Part IV — Snapshots ===== -->
    <section id="bubble" class="section">
      <h2 class="section-title">Part IV — Snapshots</h2>
      <figure class="fig">
        <div class="media">
          <img src="image/bubbles.png" alt="Bubbles in isotropic turbulence">
        </div>
        <figcaption class="cap">Instantaneous bubble distribution in a decaying isotropic flow.</figcaption>
      </figure>
      
      <figure class="fig">
        <div class="media">
          <img src="image/flow.png" alt="Droplet-laden turbulence field">
        </div>
        <figcaption class="cap">u<sub>x</sub> field with embedded deformable droplets.</figcaption>
      </figure>
    </section>
  </main>

  <!-- ===== Theme switcher (no header) ===== -->
  <script>
    // Single Button Theme Switcher (☀︎ → ☾ → ◐)
    (function(){
      const docEl = document.documentElement;
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
      const btn = document.getElementById('theme-btn');
      const ico = document.getElementById('theme-ico');
      const STORAGE_KEY = 'theme'; // 'light' | 'dark' | 'auto'

      const chars = { light: '☀︎', dark: '☾', auto: '◐' };
      const titles = {
        light: 'Theme: Light',
        dark:  'Theme: Dark',
        auto:  'Theme: Auto (follows system)'
      };

      function setIcon(mode){ if(!ico||!btn) return; ico.textContent = chars[mode]; btn.setAttribute('aria-label', titles[mode] + ' (click to change)'); btn.setAttribute('title', titles[mode]); btn.dataset.mode = mode; }
      function applyTheme(mode, persist = true){
        const isDark = (mode === 'dark') || (mode === 'auto' && prefersDark.matches);
        docEl.classList.toggle('dark', isDark);
        setIcon(mode);
        if (persist) localStorage.setItem(STORAGE_KEY, mode);
      }
      function nextMode(cur){ if(cur==='light') return 'dark'; if(cur==='dark') return 'auto'; return 'light'; }

      const saved = localStorage.getItem(STORAGE_KEY) || 'light';
      applyTheme(saved, false);

      if(btn){
        btn.addEventListener('click', () => {
          const cur = btn.dataset.mode || saved || 'light';
          applyTheme(nextMode(cur));
        });
      }
      prefersDark.addEventListener('change', () => {
        const cur = localStorage.getItem(STORAGE_KEY) || 'light';
        if (cur === 'auto') applyTheme('auto', false);
      });
    })();
  </script>
</body>
</html>
